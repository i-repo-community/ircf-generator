<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>iâ€‘Reporter è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (.ircf) ç”Ÿæˆãƒ•ã‚©ãƒ¼ãƒ </title>
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-900 min-h-screen">
    <div class="container mx-auto p-6 max-w-6xl min-h-screen flex flex-col">

        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¨ãƒªã‚¢ -->
        <div class="space-y-6 mb-8">
            <div class="flex justify-center mb-2">
                <img src="https://community.dl-asobica.com/public/uploads/community/image_main/demo-cimtops/028d4e63-0759-4321-81ae-0d47ac22c196.png"
                    alt="ãƒ­ã‚´" class="max-w-full w-full sm:w-2/3 " />
            </div>
            <h1 class="text-2xl font-bold text-orange-600">ã‚¢ã‚¤ãƒ¬ãƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(.ircf) ç”Ÿæˆãã‚“</h1>

            <!-- èª¬æ˜æ–‡æ›¸ -->
            <div class="bg-orange-50 border-l-4 border-orange-400 p-4 rounded-r-lg">
                <div class="prose text-sm text-gray-700">
                    <h2 class="text-lg font-semibold text-orange-700 mb-2">ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦</h2>
                    <p class="mb-2">
                        <strong>i-Reporter</strong>ï¼ˆã‚¢ã‚¤ãƒ¬ãƒãƒ¼ã‚¿ãƒ¼ï¼‰ã¯ã€ç´™ã®å¸³ç¥¨ã‚„Excelãƒ•ã‚©ãƒ¼ãƒ ã‚’iPadãƒ»iPhoneãƒ»Windowsã§åˆ©ç”¨ã§ãã‚‹é›»å­ãƒ•ã‚©ãƒ¼ãƒ ã«å¤‰æ›ã™ã‚‹ãƒšãƒ¼ãƒ‘ãƒ¼ãƒ¬ã‚¹åŒ–ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
                    </p>
                    <p class="mb-3">
                        i-Reporterã‚¢ãƒ—ãƒªã®å„ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šæƒ…å ±ã‚’äºˆã‚ã‚»ãƒƒãƒˆã—ãŸå°‚ç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ<strong>.ircf</strong>ï¼‰ã‚’i-Reporterã‚¢ãƒ—ãƒªã¸èª­è¾¼ã¾ã›ã‚‹äº‹ã§ã€<strong>ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šé …ç›®ã‚’è‡ªå‹•ã§ã‚»ãƒƒãƒˆ</strong>ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
                    </p>

                    <h3 class="font-semibold text-orange-600 mb-1">ğŸ¯ ä¸»ãªæ©Ÿèƒ½</h3>
                    <ul class="list-disc list-inside mb-3 space-y-1">
                        <li>ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šè¨­å®šï¼ˆè¤‡æ•°ã‚µãƒ¼ãƒãƒ¼å¯¾å¿œï¼‰</li>
                        <li>ãƒ—ãƒ­ã‚­ã‚·ãƒ»èªè¨¼è¨­å®š</li>
                        <li>PDFå‡ºåŠ›ãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡è¨­å®š</li>
                        <li>éŸ³å£°å…¥åŠ›ãƒ»ç½²åã‚¿ãƒ–ãƒ¬ãƒƒãƒˆè¨­å®š</li>
                        <li><strong>æ—¢å­˜ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ãƒ»ç·¨é›†ãƒ»ä¿å­˜</strong></li>
                    </ul>

                    <h3 class="font-semibold text-orange-600 mb-1">ğŸ“± é…å¸ƒãƒ»æ´»ç”¨ãƒ¡ãƒªãƒƒãƒˆ</h3>
                    <ul class="list-disc list-inside mb-3 space-y-1">
                        <li><strong>åˆæœŸè¨­å®šã®ç°¡ç•¥åŒ–</strong>ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå€‹åˆ¥ã«è¨­å®šã™ã‚‹æ‰‹é–“ã‚’å‰Šæ¸›</li>
                        <li><strong>å¤§é‡ç«¯æœ«ã®çµ±ä¸€ç®¡ç†</strong>ï¼šã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šã®å†…å®¹ã‚’å®¹æ˜“ã«çµ±ä¸€</li>
                        <li><strong>ç°¡å˜é…å¸ƒ</strong>ï¼šãƒ¡ãƒ¼ãƒ«æ·»ä»˜ã‚„HPå…¬é–‹ã§å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸é…å¸ƒå¯èƒ½</li>
                        <li><strong>ç«¯æœ«ã‚­ãƒƒãƒ†ã‚£ãƒ³ã‚°æœ€é©åŒ–</strong>ï¼šå°å…¥æ™‚ã®ä½œæ¥­åŠ¹ç‡ã‚’å¤§å¹…å‘ä¸Š</li>
                    </ul>

                    <div class="bg-blue-50 border border-blue-200 rounded p-3 mb-3">
                        <h4 class="font-semibold text-blue-700 mb-2">ğŸ”§ é…å¸ƒæ–¹æ³•ã®ä¾‹</h4>
                        <ul class="text-xs space-y-1">
                            <li>ğŸ“§ <strong>ãƒ¡ãƒ¼ãƒ«æ·»ä»˜</strong>ï¼šç”Ÿæˆã—ãŸ.ircfãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜ã—ã¦ãƒ¡ãƒ¼ãƒ«é€ä¿¡</li>
                            <li>ğŸŒ <strong>HPå…¬é–‹</strong>ï¼šWebã‚µã‚¤ãƒˆã‚„Portalã‚µã‚¤ãƒˆã§.ircfãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¬é–‹</li>
                            <li>ğŸ“ <strong>å…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€</strong>ï¼šç¤¾å†…ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®</li>
                            <li>ğŸ’¾ <strong>è¨˜éŒ²åª’ä½“</strong>ï¼šUSBãƒ¡ãƒ¢ãƒªã‚„ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµŒç”±ã§é…å¸ƒ</li>
                        </ul>
                    </div>

                    <div class="bg-green-50 border border-green-200 rounded p-3 mb-3">
                        <h4 class="font-semibold text-green-700 mb-2">ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</h4>
                        <ul class="text-xs space-y-1">
                            <li>ğŸ  <strong>å®Œå…¨ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ</strong>ï¼šã™ã¹ã¦ã®å‡¦ç†ãŒãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å®Œçµ</li>
                            <li>ğŸš« <strong>ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ãªã—</strong>ï¼šå…¥åŠ›ã—ãŸè¨­å®šãƒ‡ãƒ¼ã‚¿ã¯ä¸€åˆ‡å¤–éƒ¨ã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“</li>
                            <li>ğŸ“¥ <strong>HTMLãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½</strong>ï¼š<a
                                    href="https://github.com/i-repo-community/ircf-generator" target="_blank"
                                    rel="noopener noreferrer"
                                    class="text-green-600 hover:text-green-800 underline">GitHubã‹ã‚‰</a>HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åˆ©ç”¨å¯èƒ½
                            </li>
                            <li>âœï¸ <strong>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè‡ªç”±</strong>ï¼šHTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ç‹¬è‡ªã®åˆæœŸè¨­å®šé …ç›®ã‚’è¨­å®šå¯èƒ½</li>
                            <li>ğŸ” <strong>ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹</strong>ï¼šã‚³ãƒ¼ãƒ‰ãŒå®Œå…¨ã«å…¬é–‹ã•ã‚Œã„ã¾ã™</li>
                        </ul>
                    </div>

                    <h3 class="font-semibold text-orange-600 mb-1">âš ï¸ å…è²¬äº‹é …</h3>
                    <div class="text-xs bg-yellow-50 border border-yellow-200 rounded p-2 mb-3">
                        <p class="mb-1">
                            ã“ã®ãƒ„ãƒ¼ãƒ«ã¯<strong>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æœ‰å¿—ã«ã‚ˆã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢</strong>ã§ã™ã€‚
                        </p>
                        <p>
                            åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸã„ã‹ãªã‚‹æå®³ã«ã¤ã„ã¦ã‚‚ã€é–‹ç™ºè€…ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚è‡ªå·±è²¬ä»»ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚
                        </p>
                    </div>

                    <div class="bg-purple-50 border border-purple-200 rounded p-3 mb-3">
                        <h4 class="font-semibold text-purple-700 mb-2">ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆæ­“è¿ï¼</h4>
                        <div class="text-xs space-y-1">
                            <p>ã“ã®ãƒ„ãƒ¼ãƒ«ã®æ”¹å–„ã«ã”å”åŠ›ãã ã•ã„ï¼š</p>
                            <ul class="list-disc list-inside ml-2 space-y-1">
                                <li><strong>æ©Ÿèƒ½è¿½åŠ ãƒ»ãƒã‚°ä¿®æ­£</strong>ï¼šãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠé€ã‚Šãã ã•ã„</li>
                                <li><strong>ä¸å…·åˆå ±å‘Š</strong>ï¼šGitHubã®Issueã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„</li>
                                <li><strong>è¦æœ›ãƒ»ææ¡ˆ</strong>ï¼šæ–°æ©Ÿèƒ½ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ãŠèã‹ã›ãã ã•ã„</li>
                                <li><strong>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ”¹å–„</strong>ï¼šèª¬æ˜ã®è¿½åŠ ãƒ»ä¿®æ­£ã‚‚å¤§æ­“è¿</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mt-3 pt-3 border-t border-orange-200">
                        <p class="text-xs text-gray-600">
                            ğŸ“– <strong>.ircfãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°èª¬æ˜ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”è¦§ãã ã•ã„ï¼š</strong><br>
                            <a href="https://cimtops-support.com/i-Reporter/ir_manuals/jp/ios_app/ConfigurationFileReading_jp.pdf"
                                target="_blank" rel="noopener noreferrer"
                                class="text-blue-600 hover:text-blue-800 underline">
                                å°‚ç”¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šé …ç›®ã®è‡ªå‹•è¨­å®šæ©Ÿèƒ½ (PDF)
                            </a>
                        </p>
                    </div>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row items-center gap-4">
                <label for="loadFile"
                    class="inline-block cursor-pointer px-4 py-2 rounded bg-orange-500 text-white font-semibold hover:bg-orange-600 transition">
                    è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
                </label>
                <input type="file" id="loadFile" accept=".ircf,application/json" class="hidden"
                    onchange="loadSettingFile(event)">
                <span id="loadStatus" class="text-sm text-gray-500"></span>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ï¼šãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ -->
        <div class="flex flex-col lg:flex-row gap-8 flex-1 min-h-0">
            <!-- ãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒªã‚¢ -->
            <div class="flex-1 lg:w-1/2 overflow-y-auto">
                <form id="ircfForm" class="space-y-6" onsubmit="event.preventDefault(); generateJSON();">
                    <details>
                        <summary class="font-semibold">åŸºæœ¬æƒ…å ±</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="flex flex-col">Version
                                <input type="number" name="version" value="1" min="1" required class="mt-1 input">
                                <small class="text-gray-500">ç¾çŠ¶ã¯1å›ºå®šã€‚æ©Ÿèƒ½ã®ä»•æ§˜å¤‰æ›´æ™‚ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</small>
                            </label>
                            <label class="flex flex-col">Revision
                                <input type="number" name="revision" value="1" min="1" required class="mt-1 input">
                                <small class="text-gray-500">ç¾çŠ¶ã¯1å›ºå®šã€‚æ©Ÿèƒ½ã®ä»•æ§˜å¤‰æ›´æ™‚ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</small>
                            </label>
                        </fieldset>
                    </details>

                    <details>
                        <summary class="font-semibold">ã‚µãƒ¼ãƒãƒ¼è¨­å®šï¼ˆå…¨ä½“ï¼‰</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="autoLogin"
                                    class="checkbox" checked> è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ (AutoLogin)</label>
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="canUseOffline"
                                    class="checkbox" checked> ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åˆ©ç”¨å¯ (CanUseOffline)</label>
                            <label class="flex flex-col">è¦æ±‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ (TimeOut)
                                <select name="timeout" class="mt-1 select w-40">
                                    <option value="1">1 ç§’</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5" selected>5</option>
                                </select>
                            </label>
                            <details class="mt-2">
                                <summary class="cursor-pointer font-semibold">ãƒ—ãƒ­ã‚­ã‚·è¨­å®š</summary>
                                <div class="mt-2 space-y-2 ml-4">
                                    <label class="inline-flex items-center gap-2"><input type="checkbox" name="useProxy"
                                            class="checkbox"> ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ç”¨ã™ã‚‹ (UseProxyIsChecked)</label>
                                    <small class="text-gray-500">Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                                    <label class="flex flex-col">ãƒ—ãƒ­ã‚­ã‚·IPã‚¢ãƒ‰ãƒ¬ã‚¹
                                        <input type="text" name="proxyIp" value="111.222.333.444" class="mt-1 input">
                                    </label>
                                    <small class="text-gray-500">Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                                    <label class="flex flex-col">Proxy Port
                                        <input type="number" name="proxyPort" value="555" class="mt-1 input">
                                    </label>
                                    <small class="text-gray-500">Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                                    <label class="flex flex-col">Proxy User
                                        <input type="text" name="proxyUser" value="proxyuser" class="mt-1 input">
                                    </label>
                                    <small class="text-gray-500">Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                                    <label class="flex flex-col">Proxy Pass
                                        <input type="password" name="proxyPass" value="proxypass" class="mt-1 input">
                                    </label>
                                    <small class="text-gray-500">Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                                    <label class="inline-flex items-center gap-2"><input type="checkbox"
                                            name="support100" class="checkbox" checked> 100â€‘Continue ã‚’ã‚µãƒãƒ¼ãƒˆ
                                        (Support100Continue)</label>
                                    <label class="inline-flex items-center gap-2"><input type="checkbox"
                                            name="useAdAuth" class="checkbox"> AD èªè¨¼ã‚’ä½¿ç”¨ (UseAdAuthentication)</label>
                                    <small class="text-gray-500">Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                                </div>
                            </details>
                        </fieldset>
                    </details>

                    <fieldset class="border rounded-lg p-4" id="serversContainer">
                        <legend class="font-semibold">æ¥ç¶šå…ˆè¨­å®šï¼ˆè¤‡æ•°å¯ï¼‰</legend>
                        <small
                            class="text-gray-500">å–ã‚Šè¾¼ã¿æ™‚ã«1å€‹ä»¥ä¸Šã‚ã£ãŸå ´åˆã€æ—¢å­˜è¨­å®šã‚’å…¨ä¸Šæ›¸ãã—ã€ä¸€ã¤ç›®ã®æ¥ç¶šå…ˆã‚’é¸æŠã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å…¨å‰Šé™¤ã—ã¾ã™ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</small>
                    </fieldset>
                    <button type="button" onclick="addServer()" class="btn">ï¼‹æ¥ç¶šå…ˆã‚’è¿½åŠ </button>

                    <details>
                        <summary class="font-semibold">ãƒ¡ãƒ¼ãƒ«è¨­å®š</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="sendMailPDF"
                                    class="checkbox" checked> PDF ã‚’ãƒ¡ãƒ¼ãƒ«é€ä¿¡ (SendMailPDF)</label>
                            <small class="text-gray-500">â€»iOSã®ã¿</small>
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="sendCrashReport"
                                    class="checkbox" checked> ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡ (SendCrashReport)</label>
                            <small class="text-gray-500">â€»iOSã®ã¿</small>
                            <label class="inline-flex items-center gap-2"><input type="checkbox"
                                    name="generatePDFVector" class="checkbox" checked> ãƒ™ã‚¯ã‚¿ãƒ¼ PDF ç”Ÿæˆ
                                (GeneratePDFWithVector)</label>
                            <small class="text-gray-500">â€»iOSã®ã¿</small>
                        </fieldset>
                    </details>

                    <details>
                        <summary class="font-semibold">ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼è¨­å®š</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2"><input type="checkbox"
                                    name="selectedClusterFrame" class="checkbox"
                                    checked>é¸æŠã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®æ è¡¨ç¤ºSelectedClusterFrame</label>
                            <small class="text-gray-500">â€»iOSã®ã¿</small>
                            <label class="flex flex-col">GPS ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è·é›¢ (GpsDistanceFilter)
                                <input type="number" name="gpsDistanceFilter" value="100" min="0"
                                    class="mt-1 input w-40">
                                <small class="text-gray-500">â€»iOSã®ã¿ 10, 100, 1000ã®ã¿æœ‰åŠ¹</small>
                            </label>
                        </fieldset>
                    </details>

                    <details>
                        <summary class="font-semibold">PDF å‡ºåŠ›</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="flex flex-col">PDF ãƒ•ã‚©ãƒ³ãƒˆ (PdfOutputFont)
                                <input type="text" name="pdfFont" value="Font Name" class="mt-1 input">
                            </label>
                            <small class="text-gray-500">â€»Windowsã®ã¿</small>
                        </fieldset>
                    </details>

                    <details>
                        <summary class="font-semibold">è¨ˆç®—ãƒã‚§ãƒƒã‚¯</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="calculateCheck"
                                    class="checkbox"> è¨ˆç®—çµæœãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ (CalculateCheck)</label>
                            <small class="text-gray-500">â€»Windowsã®ã¿</small>
                        </fieldset>
                    </details>

                    <details>
                        <summary class="font-semibold">éŸ³å£°å…¥åŠ›</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="usingVoiceInput"
                                    class="checkbox" checked> éŸ³å£°å…¥åŠ›ã‚’ä½¿ç”¨ (UsingVoiceInput)</label>
                            <label class="inline-flex items-center gap-2"><input type="checkbox"
                                    name="permissionVoiceInput" class="checkbox" checked> è¿”ä¿¡æ™‚ã‚‚éŸ³å£°å…¥åŠ›è¨±å¯
                                (PermissionVoiceInputWhileAnswerBack)</label>
                            <label class="flex flex-col">å£°ã®é«˜ã• (UtterancePitch)
                                <input type="number" step="0.1" name="utterancePitch" value="1.0" min="0.0" max="1.0"
                                    class="mt-1 input w-40">
                            </label>
                            <label class="flex flex-col">å£°ã®æ—©ã• (UtteranceRate)
                                <input type="number" step="0.1" name="utteranceRate" value="1.0" min="0.0" max="1.0"
                                    class="mt-1 input w-40">
                            </label>
                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="outputSpeaker"
                                    class="checkbox" checked> ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼å‡ºåŠ› (OutputSpeaker)</label>
                            <small class="text-gray-500">â€»iOSã®ã¿</small>
                        </fieldset>
                    </details>
                    <details>
                        <summary class="font-semibold">ä¸€èˆ¬è¨­å®š</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="showTest" class="checkbox" checked>
                                ãƒ†ã‚¹ãƒˆå¸³ç¥¨ã‚’è¡¨ç¤º (ShowTest)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="continueAfterSave" class="checkbox" checked>
                                ã‚µãƒ¼ãƒãƒ¼ä¿å­˜å¾Œã€ç·¨é›†ã‚’ç¶™ç¶šã™ã‚‹ (ContinueAfterSave)
                                <small class="text-gray-500 ml-2">â€»iOSã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="definitionSave" class="checkbox" checked>
                                å¸³ç¥¨å®šç¾©ä¿å­˜ (DefinitionSave)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="confirmSaveCompleted" class="checkbox" checked>
                                å®Œäº†ä¿å­˜æ™‚ã«ç¢ºèªã™ã‚‹ (ConfirmSaveCompleted)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="autoBackup" class="checkbox" checked>
                                è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½ã‚’ä½¿ã† (AutoBackup)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="showConfirmUploadDialog" class="checkbox" checked>
                                ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º (ShowConfirmUploadDialog)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="continuousNewReport" class="checkbox" checked>
                                é€£ç¶šå¸³ç¥¨æ©Ÿèƒ½ã‚’ä½¿ã† (ContinuousNewReport)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="launchKeepingWidth" class="checkbox" checked>
                                æ¨ªå¹…ãƒ­ãƒƒã‚¯ã§èµ·å‹•ã™ã‚‹ (LaunchKeepingWidth)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="confirmBulkUpload" class="checkbox" checked>
                                ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã«ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ (ConfirmBulkUpload)

                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="initialLibrary" class="checkbox" checked>
                                ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆæœŸè¡¨ç¤º (InitialLibrary)<small class="text-gray-500 ml-2">true:ãƒ­ãƒ¼ã‚«ãƒ« false:ã‚µãƒ¼ãƒãƒ¼</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="showSentReports" class="checkbox" checked>
                                é€ä¿¡æ¸ˆãƒ­ãƒ¼ã‚«ãƒ«ä¿ç®¡å¸³ç¥¨ã®è¡¨ç¤º (ShowSentReports)
                                <small class="text-gray-500 ml-2">â€»iOSã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="showClusterFrame" class="checkbox" checked>
                                å¸³ç¥¨åˆæœŸè¡¨ç¤º ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ  (ShowClusterFrame)
                                <small class="text-gray-500 ml-2">â€»iOSã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="showNetwork" class="checkbox" checked>
                                ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç·šã®è¡¨ç¤º (ShowNetwork)
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="showRequiredMark" class="checkbox" checked>
                                ã¯ã˜ã‚ã‹ã‚‰å¿…é ˆå…¥åŠ›ãƒãƒ¼ã‚¯ã‚’è¡¨ç¤º (ShowRequiredMark)
                                <small class="text-gray-500 ml-2">â€»iOSã®ã¿</small>
                            </label>
                            <label class="flex flex-col">
                                ãƒ­ãƒ¼ã‚«ãƒ«å‰Šé™¤ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º (ConfirmLocalDelete)
                                <input type="number" name="confirmLocalDelete" value="2" class="mt-1 input w-40">
                                <small class="text-gray-500">0:å¸¸ã«ç¢ºèª 1:ä¸€æ‹¬å‰Šé™¤æ™‚ã®ã¿ 2:è¡¨ç¤ºã—ãªã„</small>
                            </label>
                            <label class="flex flex-col">
                                ãƒ—ãƒªãƒ³ã‚¿ç¨®åˆ¥ (Printer)
                                <input type="number" name="printer" value="0" class="mt-1 input w-40">
                                <small class="text-gray-500">0:ãƒ—ãƒªãƒ³ã‚¿ãªã— 1:PJ-673</small>
                                <small class="text-gray-500 ml-2">â€»iOSã®ã¿</small>
                            </label>
                            <label class="flex flex-col">
                                PJ-673 ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ (PJ-673Address)
                                <input type="text" name="pj673Address" value="192.168.1.1" class="mt-1 input">
                                <small class="text-gray-500">iOSã®ã¿</small>
                            </label>
                            <label class="flex flex-col">
                                PJ-673 ã®å°åˆ·æ¿ƒåº¦ (PJ-673Density)
                                <input type="number" name="pj673Density" value="5" class="mt-1 input w-40">
                                <small class="text-gray-500">0ã€œ10ï¼ˆiOSã®ã¿ï¼‰</small>
                            </label>
                            <label class="flex flex-col">
                                GS1-128 ã®åŒºåˆ‡ã‚Šæ–‡å­—æŒ‡å®šæ–¹æ³• (GS1-128Delimiter)
                                <input type="number" name="gs1Delimiter" value="0" class="mt-1 input w-40">
                                <small class="text-gray-500">0:æ–‡å­— 1:ASCIIï¼ˆiOSã®ã¿ï¼‰</small>
                            </label>
                            <label class="flex flex-col">
                                GS1-128 ã®åŒºåˆ‡ã‚Šæ–‡å­— (GS1-128Letter)
                                <input type="text" name="gs1Letter" value="," class="mt-1 input">
                                <small class="text-gray-500">iOSã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="adobeReaderPrint" class="checkbox" checked>
                                Adobeã®å°åˆ·ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ (AdobeReaderPrint)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="flex flex-col">
                                ã‚¿ãƒƒãƒãƒ‘ãƒãƒ«æ„Ÿåº¦ (TouchPanelSensitivity)
                                <input type="number" name="touchPanelSensitivity" value="20" class="mt-1 input w-40">
                                <small class="text-gray-500">0ã€œ20ï¼ˆWindowsã®ã¿ï¼‰</small>
                            </label>
                            <label class="flex flex-col">
                                ã‚«ãƒ¡ãƒ©ãƒ­ãƒ¼ãƒ«ä¿å­˜å…ˆ (SaveLocalCameraImagePath)
                                <input type="text" name="saveLocalCameraPath" value="" class="mt-1 input">
                                <small class="text-gray-500">Windowsã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="doubleClickOnActionCluster" class="checkbox" checked>
                                ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œã™ã‚‹ (DoubleClickOnActionCluster)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="continuousNewReportWithCopy" class="checkbox" checked>
                                é€£ç¶šå¸³ç¥¨ã‚³ãƒ”ãƒ¼ã§ä½œæˆã™ã‚‹ (ContinuousNewReportWithCopy)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="useFullScreenSignArea" class="checkbox" checked>
                                æ‰‹æ›¸ãã‚µã‚¤ãƒ³é ˜åŸŸæœ€å¤§è¡¨ç¤º (UseFullScreenSignArea)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="allowMultiClient" class="checkbox" checked>
                                å¤šé‡èµ·å‹•ã‚’è¨±å¯ã™ã‚‹ (AllowMultiClient)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="useSoftwareKeyboard" class="checkbox" checked>
                                ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ (UseSoftwareKeyboard)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="inline-flex items-center gap-2">
                                <input type="checkbox" name="moveInputClusterPosition" class="checkbox" checked>
                                ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç·¨é›†é–‹å§‹æ™‚ã«ä½ç½®è£œæ­£ã™ã‚‹ (MoveInputClusterPosition)
                                <small class="text-gray-500 ml-2">â€»Windowsã®ã¿</small>
                            </label>
                            <label class="flex flex-col">
                                PVã‚«ãƒ¡ãƒ©ã‚¿ã‚¤ãƒ— (PvCameraType)
                                <input type="number" name="pvCameraType" value="1" class="mt-1 input w-40">
                                <small class="text-gray-500">Windowsã®ã¿1 : 5.2.20071ä»¥å‰ã®i-Reporterã‚«ãƒ¡ãƒ©ã‚¢ãƒ—ãƒªã§æ’®å½±
                                    2 : i-Reporterã‚«ãƒ¡ãƒ©ã‚¢ãƒ—ãƒªã§æ’®å½±
                                    3 : Windowsæ¨™æº–ã‚«ãƒ¡ãƒ©ã§æ’®å½±
                                    Windowsç‰ˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹é …ç›®ã§ã™ã€‚</small>
                            </label>
                        </fieldset>
                    </details>
                    <details>
                        <summary class="font-semibold">å¤–éƒ¨æ©Ÿå™¨</summary>
                        <fieldset class="border rounded-lg p-4 space-y-2">
                            <label class="inline-flex items-center gap-2"><input type="checkbox"
                                    name="useSignatureTablet" class="checkbox" checked> ç½²åã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨
                                (UseSignatureTablet)</label>
                        </fieldset>
                    </details>
                    <!-- Submit -->
                    <button type="submit" class="btn-primary">JSON ã‚’ç”Ÿæˆ</button>
                </form>
            </div>

            <!-- å‡ºåŠ›ã‚¨ãƒªã‚¢ -->
            <div class="flex-1 lg:w-1/2 flex flex-col min-h-0">
                <div class="flex flex-col h-full">
                    <h2 class="text-xl font-semibold mb-2">ç”Ÿæˆçµæœ</h2>
                    <textarea id="output" class="flex-1 w-full p-2 font-mono text-sm bg-gray-100 rounded resize-none"
                        readonly></textarea>
                    <div class="pt-4">
                        <a id="downloadBtn" class="hidden btn-secondary w-max"></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tailwind element macros
        document.documentElement.classList.add('dark'); // optional dark mode testing

        // ------- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”Ÿæˆæ©Ÿèƒ½ -------
        let isGenerating = false;

        function generateJSONRealtime() {
            if (isGenerating) return;
            isGenerating = true;

            // å°‘ã—é…å»¶ã‚’å…¥ã‚Œã¦é€£ç¶šå®Ÿè¡Œã‚’é˜²ã
            setTimeout(() => {
                generateJSON();
                isGenerating = false;
            }, 100);
        }

        // ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        function setupRealtimeGeneration() {
            const form = document.getElementById('ircfForm');

            // å…¨ã¦ã®å…¥åŠ›è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
            form.addEventListener('input', generateJSONRealtime);
            form.addEventListener('change', generateJSONRealtime);

            // å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹è¦ç´ ï¼ˆã‚µãƒ¼ãƒãƒ¼è¨­å®šï¼‰ã‚‚ç›£è¦–
            const observer = new MutationObserver(() => {
                // æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸè¦ç´ ã«ã‚‚ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
                const newInputs = form.querySelectorAll('input, select, textarea');
                newInputs.forEach(input => {
                    if (!input.hasAttribute('data-listener-added')) {
                        input.addEventListener('input', generateJSONRealtime);
                        input.addEventListener('change', generateJSONRealtime);
                        input.setAttribute('data-listener-added', 'true');
                    }
                });
            });

            observer.observe(form, { childList: true, subtree: true });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        document.addEventListener('DOMContentLoaded', () => {
            setupRealtimeGeneration();
            // åˆæœŸç”Ÿæˆ
            generateJSON();
        });

        // ------- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼æ©Ÿèƒ½ -------
        function loadSettingFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function (e) {
                try {
                    const data = JSON.parse(e.target.result);
                    fillFormFromJSON(data);
                } catch (err) {
                    console.error('ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ã‚¨ãƒ©ãƒ¼:', err);
                    document.getElementById('loadStatus').textContent = 'ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ã‚¨ãƒ©ãƒ¼';
                }
            };
            reader.readAsText(file);
        }

        function fillFormFromJSON(data) {
            const f = document.forms.ircfForm;
            console.log('èª­ã¿è¾¼ã‚“ã JSONãƒ‡ãƒ¼ã‚¿:', data);

            try {
                // åŸºæœ¬æƒ…å ±
                const basicMap = [
                    ["version", "Version", "value"],
                    ["revision", "Revision", "value"]
                ];
                basicMap.forEach(([formName, jsonKey, prop]) => {
                    if (f[formName] && data[jsonKey] !== undefined) {
                        f[formName][prop] = data[jsonKey];
                    }
                });

                // Serverè¨­å®š
                if (data.Server) {
                    const serverMap = [
                        ["autoLogin", "AutoLogin", "checked"],
                        ["canUseOffline", "CanUseOffline", "checked"],
                        ["timeout", "TimeOut", "value"],
                        ["useProxy", "UseProxyIsChecked", "checked"],
                        ["proxyIp", "ProxyIpAddress", "value"],
                        ["proxyPort", "ProxyPort", "value"],
                        ["proxyUser", "ProxyUserName", "value"],
                        ["proxyPass", "ProxyPassword", "value"],
                        ["support100", "Support100Continue", "checked"],
                        ["useAdAuth", "UseAdAuthentication", "checked"]
                    ];
                    serverMap.forEach(([formName, jsonKey, prop]) => {
                        if (f[formName] && data.Server[jsonKey] !== undefined) {
                            f[formName][prop] = data.Server[jsonKey];
                        }
                    });

                    // ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¹ãƒˆã®å‡¦ç†
                    if (Array.isArray(data.Server.Servers)) {
                        const serverContainer = document.getElementById('serversContainer');
                        if (serverContainer) {
                            serverContainer.innerHTML = '<legend class="font-semibold">æ¥ç¶šå…ˆè¨­å®šï¼ˆè¤‡æ•°å¯ï¼‰</legend>';
                            serverIndex = 0;
                            data.Server.Servers.forEach(s => {
                                addServer(s);
                            });
                        }
                    }
                }

                // Mailè¨­å®š
                if (data.Mail) {
                    const mailMap = [
                        ["sendMailPDF", "SendMailPDF", "checked"],
                        ["sendCrashReport", "SendCrashReport", "checked"],
                        ["generatePDFVector", "GeneratePDFWithVector", "checked"]
                    ];
                    mailMap.forEach(([formName, jsonKey, prop]) => {
                        if (f[formName] && data.Mail[jsonKey] !== undefined) {
                            f[formName][prop] = data.Mail[jsonKey];
                        }
                    });
                }

                // Clustersè¨­å®š
                if (data.Clusters) {
                    const clustersMap = [
                        ["selectedClusterFrame", "SelectedClusterFrame", "checked"],
                        ["gpsDistanceFilter", "GpsDistanceFilter", "value"]
                    ];
                    clustersMap.forEach(([formName, jsonKey, prop]) => {
                        if (f[formName] && data.Clusters[jsonKey] !== undefined) {
                            f[formName][prop] = data.Clusters[jsonKey];
                        }
                    });
                }

                // PDFè¨­å®š
                if (data.Pdf && f.pdfFont && data.Pdf.PdfOutputFont !== undefined) {
                    f.pdfFont.value = data.Pdf.PdfOutputFont;
                }

                // CalculateCheckè¨­å®š
                if (data.CalculateCheck && f.calculateCheck && data.CalculateCheck.CalculateCheck !== undefined) {
                    f.calculateCheck.checked = data.CalculateCheck.CalculateCheck;
                }

                // UsingVoiceInputè¨­å®š
                if (data.UsingVoiceInput) {
                    const voiceMap = [
                        ["usingVoiceInput", "UsingVoiceInput", "checked"],
                        ["permissionVoiceInput", "PermissionVoiceInputWhileAnswerBack", "checked"],
                        ["utterancePitch", "UtterancePitch", "value"],
                        ["utteranceRate", "UtteranceRate", "value"],
                        ["outputSpeaker", "OutputSpeaker", "checked"]
                    ];
                    voiceMap.forEach(([formName, jsonKey, prop]) => {
                        if (f[formName] && data.UsingVoiceInput[jsonKey] !== undefined) {
                            f[formName][prop] = data.UsingVoiceInput[jsonKey];
                        }
                    });
                }

                // Generalè¨­å®š
                if (data.General) {
                    const generalMap = [
                        ["pj673Address", "PJ 673Address", "value"],
                        ["pj673Density", "PJ 673Density", "value"],
                        ["gs1Delimiter", "GS1 128Delimiter", "value"],
                        ["gs1Letter", "GS1 128Letter", "value"],
                        ["showTest", "ShowTest", "checked"],
                        ["continueAfterSave", "ContinueAfterSave", "checked"],
                        ["definitionSave", "DefinitionSave", "checked"],
                        ["confirmSaveCompleted", "ConfirmSaveCompleted", "checked"],
                        ["autoBackup", "AutoBackup", "checked"],
                        ["showConfirmUploadDialog", "ShowConfirmUploadDialog", "checked"],
                        ["continuousNewReport", "ContinuousNewReport", "checked"],
                        ["launchKeepingWidth", "LaunchKeepingWidth", "checked"],
                        ["confirmBulkUpload", "ConfirmBulkUpload", "checked"],
                        ["initialLibrary", "InitialLibrary", "checked"],
                        ["showSentReports", "ShowSentReports", "checked"],
                        ["showClusterFrame", "ShowClusterFrame", "checked"],
                        ["showNetwork", "ShowNetwork", "checked"],
                        ["showRequiredMark", "ShowRequiredMark", "checked"],
                        ["confirmLocalDelete", "ConfirmLocalDelete", "value"],
                        ["printer", "Printer", "value"],
                        ["adobeReaderPrint", "AdobeReaderPrint", "checked"],
                        ["touchPanelSensitivity", "TouchPanelSensitivity", "value"],
                        ["saveLocalCameraPath", "SaveLocalCameraImagePath", "value"],
                        ["doubleClickOnActionCluster", "DoubleClickOnActionCluster", "checked"],
                        ["continuousNewReportWithCopy", "ContinuousNewReportWithCopy", "checked"],
                        ["useFullScreenSignArea", "UseFullScreenSignArea", "checked"],
                        ["allowMultiClient", "AllowMultiClient", "checked"],
                        ["useSoftwareKeyboard", "UseSoftwareKeyboard", "checked"],
                        ["moveInputClusterPosition", "MoveInputClusterPosition", "checked"],
                        ["pvCameraType", "PvCameraType", "value"]
                    ];
                    generalMap.forEach(([formName, jsonKey, prop]) => {
                        if (f[formName] && data.General[jsonKey] !== undefined) {
                            f[formName][prop] = data.General[jsonKey];
                        }
                    });
                }

                // ExternalDeviceè¨­å®š
                if (data.ExternalDevice && data.ExternalDevice.SignatureTablet) {
                    if (f.useSignatureTablet && data.ExternalDevice.SignatureTablet.UseSignatureTablet !== undefined) {
                        f.useSignatureTablet.checked = data.ExternalDevice.SignatureTablet.UseSignatureTablet;
                    }
                }

                // å®‰å…¨ã®ãŸã‚ã€ã™ã¹ã¦ã®detailsã‚’é–‰ã˜ã‚‹
                document.querySelectorAll('details').forEach(d => d.open = false);

                // èª­è¾¼å¾Œã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”Ÿæˆã‚’å®Ÿè¡Œ
                generateJSONRealtime();
                document.getElementById('loadStatus').textContent = 'è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ';

            } catch (error) {
                console.error('è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ:', error);
                document.getElementById('loadStatus').textContent = 'è¨­å®šã®é©ç”¨ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
            }
        }

        // ------- æ¥ç¶šå…ˆãƒ–ãƒ­ãƒƒã‚¯ã‚’å‹•çš„è¿½åŠ  -------
        let serverIndex = 0;
        function addServer(initial = {}) {
            const c = document.getElementById('serversContainer');
            const div = document.createElement('div');
            div.className = 'border rounded-lg p-4 space-y-2 mt-4';
            div.dataset.index = serverIndex;
            div.innerHTML = `
        <h3 class="font-semibold">æ¥ç¶šå…ˆ #${serverIndex + 1}</h3>
        <label class="flex flex-col">æ¥ç¶šå…ˆå
          <input type="text" name="serverName${serverIndex}" value="${initial.ServerName || ''}" class="mt-1 input" required>
        </label>
        <label class="flex flex-col">URL
          <input type="url" name="url${serverIndex}" value="${initial.URL || ''}" class="mt-1 input" required>
        </label>
        <label class="flex flex-col">ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
          <input type="text" name="userId${serverIndex}" value="${initial.UserID || ''}" class="mt-1 input">
        </label>
        <label class="flex flex-col">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
          <input type="password" name="password${serverIndex}" value="${initial.Password || ''}" class="mt-1 input">
        </label>
        <label class="inline-flex items-center gap-2"><input type="checkbox" name="canChange${serverIndex}" ${initial.CanChangeWithLocalReports ? 'checked' : ''} class="checkbox"> ãƒ­ãƒ¼ã‚«ãƒ«å¸³ç¥¨å­˜åœ¨æ™‚ã«æ¥ç¶šå…ˆå¤‰æ›´å¯èƒ½</label>
        <button type="button" onclick="removeServer(this)" class="btn-danger mt-2">å‰Šé™¤</button>`;
            c.appendChild(div);

            // æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸè¦ç´ ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”Ÿæˆã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
            const inputs = div.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', generateJSONRealtime);
                input.addEventListener('change', generateJSONRealtime);
                input.setAttribute('data-listener-added', 'true');
            });

            serverIndex++;
            // è¿½åŠ ã—ãŸå‰Šé™¤ãƒœã‚¿ãƒ³ã«ã‚‚Tailwindã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸
            const btn = div.querySelector('.btn-danger');
            if (btn) btn.classList.add('px-3', 'py-1', 'rounded', 'bg-red-500', 'text-white', 'hover:bg-red-600');

            // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”Ÿæˆã‚’å®Ÿè¡Œ
            generateJSONRealtime();
        }

        // ã‚µãƒ¼ãƒãƒ¼å‰Šé™¤é–¢æ•°
        function removeServer(button) {
            button.parentElement.remove();
            generateJSONRealtime();
        }

        // ã‚µãƒ³ãƒ—ãƒ«åˆæœŸæ¥ç¶šå…ˆ
        addServer({
            ServerName: 'CIMTOPS',
            URL: 'https://ircl-sup001kcy.conmas-i-reporter.com/ConMasWebTEST/Rests/ConMasIReporter.aspx',
            UserID: 'user01',
            Password: 'p01',
            CanChangeWithLocalReports: true
        });
        addServer({
            ServerName: 'CIMTOPS2',
            URL: 'https://ircl-sup001kcy.conmas-i-reporter.com/ConMasWebTEST2/Rests/ConMasIReporter.aspx',
            UserID: 'user02',
            Password: 'p02',
            CanChangeWithLocalReports: true
        });

        // ------- JSON ç”Ÿæˆ -------
        function generateJSON() {
            const f = document.forms.ircfForm;
            const j = {
                Version: f.version ? Number(f.version.value) : 1,
                Revision: f.revision ? Number(f.revision.value) : 1,
                Server: {
                    AutoLogin: f.autoLogin ? f.autoLogin.checked : false,
                    CanUseOffline: f.canUseOffline ? f.canUseOffline.checked : false,
                    TimeOut: f.timeout ? Number(f.timeout.value) : 5,
                    UseProxyIsChecked: f.useProxy ? f.useProxy.checked : false,
                    ProxyIpAddress: f.proxyIp ? f.proxyIp.value : '',
                    ProxyPort: f.proxyPort ? String(f.proxyPort.value) : '',
                    ProxyUserName: f.proxyUser ? f.proxyUser.value : '',
                    ProxyPassword: f.proxyPass ? f.proxyPass.value : '',
                    Support100Continue: f.support100 ? f.support100.checked : false,
                    UseAdAuthentication: f.useAdAuth ? f.useAdAuth.checked : false,
                    Servers: []
                },
                Mail: {
                    SendMailPDF: f.sendMailPDF ? f.sendMailPDF.checked : false,
                    SendCrashReport: f.sendCrashReport ? f.sendCrashReport.checked : false,
                    GeneratePDFWithVector: f.generatePDFVector ? f.generatePDFVector.checked : false
                },
                Clusters: {
                    SelectedClusterFrame: f.selectedClusterFrame ? f.selectedClusterFrame.checked : false,
                    GpsDistanceFilter: f.gpsDistanceFilter ? Number(f.gpsDistanceFilter.value) : 0
                },
                Pdf: {
                    PdfOutputFont: f.pdfFont ? f.pdfFont.value : ''
                },
                CalculateCheck: {
                    CalculateCheck: f.calculateCheck ? f.calculateCheck.checked : false
                },
                UsingVoiceInput: {
                    UsingVoiceInput: f.usingVoiceInput ? f.usingVoiceInput.checked : false,
                    PermissionVoiceInputWhileAnswerBack: f.permissionVoiceInput ? f.permissionVoiceInput.checked : false,
                    UtterancePitch: f.utterancePitch ? Number(f.utterancePitch.value) : 1,
                    UtteranceRate: f.utteranceRate ? Number(f.utteranceRate.value) : 1,
                    OutputSpeaker: f.outputSpeaker ? f.outputSpeaker.checked : false
                },
                General: {
                    ShowTest: f.showTest ? f.showTest.checked : false,
                    ContinueAfterSave: f.continueAfterSave ? f.continueAfterSave.checked : false,
                    DefinitionSave: f.definitionSave ? f.definitionSave.checked : false,
                    ConfirmSaveCompleted: f.confirmSaveCompleted ? f.confirmSaveCompleted.checked : false,
                    AutoBackup: f.autoBackup ? f.autoBackup.checked : false,
                    ShowConfirmUploadDialog: f.showConfirmUploadDialog ? f.showConfirmUploadDialog.checked : false,
                    ContinuousNewReport: f.continuousNewReport ? f.continuousNewReport.checked : false,
                    LaunchKeepingWidth: f.launchKeepingWidth ? f.launchKeepingWidth.checked : false,
                    ConfirmBulkUpload: f.confirmBulkUpload ? f.confirmBulkUpload.checked : false,
                    InitialLibrary: f.initialLibrary ? f.initialLibrary.checked : false,
                    ShowSentReports: f.showSentReports ? f.showSentReports.checked : false,
                    ShowClusterFrame: f.showClusterFrame ? f.showClusterFrame.checked : false,
                    ShowNetwork: f.showNetwork ? f.showNetwork.checked : false,
                    ShowRequiredMark: f.showRequiredMark ? f.showRequiredMark.checked : false,
                    ConfirmLocalDelete: f.confirmLocalDelete ? Number(f.confirmLocalDelete.value) : 0,
                    Printer: f.printer ? Number(f.printer.value) : 0,
                    "PJ 673Address": f.pj673Address ? f.pj673Address.value : '',
                    "PJ 673Density": f.pj673Density ? Number(f.pj673Density.value) : 0,
                    "GS1 128Delimiter": f.gs1Delimiter ? Number(f.gs1Delimiter.value) : 0,
                    "GS1 128Letter": f.gs1Letter ? f.gs1Letter.value : '',
                    AdobeReaderPrint: f.adobeReaderPrint ? f.adobeReaderPrint.checked : false,
                    TouchPanelSensitivity: f.touchPanelSensitivity ? Number(f.touchPanelSensitivity.value) : 0,
                    SaveLocalCameraImagePath: f.saveLocalCameraPath ? f.saveLocalCameraPath.value : '',
                    DoubleClickOnActionCluster: f.doubleClickOnActionCluster ? f.doubleClickOnActionCluster.checked : false,
                    ContinuousNewReportWithCopy: f.continuousNewReportWithCopy ? f.continuousNewReportWithCopy.checked : false,
                    UseFullScreenSignArea: f.useFullScreenSignArea ? f.useFullScreenSignArea.checked : false,
                    AllowMultiClient: f.allowMultiClient ? f.allowMultiClient.checked : false,
                    UseSoftwareKeyboard: f.useSoftwareKeyboard ? f.useSoftwareKeyboard.checked : false,
                    MoveInputClusterPosition: f.moveInputClusterPosition ? f.moveInputClusterPosition.checked : false,
                    PvCameraType: f.pvCameraType ? Number(f.pvCameraType.value) : 0
                },
                ExternalDevice: {
                    SignatureTablet: {
                        UseSignatureTablet: f.useSignatureTablet ? f.useSignatureTablet.checked : false
                    }
                }
            };

            // servers loop
            document.querySelectorAll('#serversContainer [data-index]').forEach(div => {
                const i = div.dataset.index;
                j.Server.Servers.push({
                    ServerName: f[`serverName${i}`] ? f[`serverName${i}`].value : '',
                    URL: f[`url${i}`] ? f[`url${i}`].value : '',
                    UserID: f[`userId${i}`] ? f[`userId${i}`].value : '',
                    Password: f[`password${i}`] ? f[`password${i}`].value : '',
                    CanChangeWithLocalReports: f[`canChange${i}`] ? f[`canChange${i}`].checked : false
                });
            });

            // ã‚µãƒ¼ãƒãƒ¼ãƒã‚§ãƒƒã‚¯
            if (j.Server.Servers.length < 1) {
                alert('1å€‹ä»¥ä¸Šã‚ã£ãŸå ´åˆã€æ—¢å­˜è¨­å®šã‚’å…¨ä¸Šæ›¸ãã—ã€ä¸€ã¤ç›®ã®æ¥ç¶šå…ˆã‚’é¸æŠã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å…¨å‰Šé™¤ã—ã¾ã™ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚');
                //return;
            }

            const txt = JSON.stringify(j, null, 2);
            const out = document.getElementById('output');
            out.value = txt;

            // download
            const blob = new Blob([txt], { type: 'application/x-ircf;charset=utf-8' });
            const href = URL.createObjectURL(blob);
            const dl = document.getElementById('downloadBtn');
            dl.classList.remove('hidden');
            dl.href = href;
            dl.download = 'SettingFile.ircf';
            dl.textContent = '.ircf ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰';
        }

        // Tailwind style shortcuts
        document.querySelectorAll('.btn').forEach(btn => btn.classList.add('mt-2', 'px-4', 'py-2', 'rounded', 'bg-orange-500', 'text-white', 'hover:bg-orange-600'));
        document.querySelectorAll('.btn-primary').forEach(btn => btn.classList.add('mt-4', 'px-6', 'py-2', 'rounded', 'bg-orange-600', 'text-white', 'hover:bg-orange-700'));
        document.querySelectorAll('.btn-secondary').forEach(btn => btn.classList.add('px-4', 'py-2', 'rounded', 'bg-orange-400', 'text-white', 'hover:bg-orange-500'));
        document.querySelectorAll('.btn-danger').forEach(btn => btn.classList.add('px-3', 'py-1', 'rounded', 'bg-red-500', 'text-white', 'hover:bg-red-600'));
        document.querySelectorAll('input:not([type=checkbox]):not([type=radio]), select').forEach(el => el.classList.add('border', 'rounded', 'p-1', 'focus:outline-none', 'focus:ring', 'focus:border-orange-500'));
        document.body.classList.add('bg-orange-50');
    </script>
</body>

</html>
